{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\Elija\\\\E_Store\\\\MyStore\\\\MyStore\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { Customer } from '../models/customer.model';\nimport { BehaviorSubject } from 'rxjs';\nimport { CartProduct } from '../models/cart_product.model';\nimport { Product } from '../models/product.model';\nimport * as i0 from \"@angular/core\";\nexport class DatashareService {\n  constructor() {\n    //MUST BE CLASSES NOT IMPORTS!!!\n    this.customerData = new BehaviorSubject(new Customer());\n    this.logginData = new BehaviorSubject(false); //private cartData: BehaviorSubject<Array<CartProduct>> = new BehaviorSubject([]);\n\n    this.cartData = new BehaviorSubject([new CartProduct()]);\n    this.totalItems = new BehaviorSubject(0); //private cartData = new BehaviorSubject<CartProduct[]>([])\n\n    this.products = new BehaviorSubject([new Product()]); //{productId: 0, name: '', price: 0, info : '', category : '', picture : '', quantity: 0}\n\n    this.search = new BehaviorSubject('');\n    this.count1 = 0; //count2 = 0;\n    //item = {cartProductId: 0, productId: 0, customerId: 0, quantity: 0}\n\n    this.currentCustomerData = this.customerData.asObservable();\n    this.currentLogginData = this.logginData.asObservable();\n    this.currentCartData = this.cartData.asObservable();\n    this.currentTotalItems = this.totalItems.asObservable();\n    this.currentProducts = this.products.asObservable();\n    this.currentSearch = this.search.asObservable();\n  }\n\n  ngOnInit() {\n    this.getTotal();\n  }\n\n  setSearch(data) {\n    this.search.next(data);\n  }\n\n  getSearch() {\n    return this.search;\n  }\n\n  setProducts(data) {\n    this.products.next(data);\n  }\n\n  getProducts() {\n    return this.products;\n  }\n\n  setCustomerData(data) {\n    this.customerData.next(data);\n  }\n\n  getCustomerData() {\n    return this.customerData;\n  }\n\n  setLoginData(data) {\n    this.logginData.next(data);\n  }\n\n  getLoginData() {\n    return this.customerData;\n  }\n\n  setCartData(data) {\n    this.cartData.next(data);\n  }\n\n  getCartData() {\n    return this.cartData;\n  }\n\n  setTotalItems(data) {\n    this.totalItems.next(data);\n  }\n\n  getTotalItems() {\n    return this.totalItems;\n  }\n\n  addCount(value) {\n    this.count1 += value;\n    this.totalItems.next(this.count1);\n  }\n\n  decCount(value) {\n    this.count1 -= value;\n    this.totalItems.next(this.count1);\n  }\n\n  getTotal() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.currentCartData.subscribe(data => {\n        let sum = 0;\n        data.forEach(obj => {\n          sum += obj.quantity;\n        });\n        _this.count1 = sum;\n\n        _this.setTotalItems(sum);\n      });\n    })();\n  }\n\n}\n\nDatashareService.ɵfac = function DatashareService_Factory(t) {\n  return new (t || DatashareService)();\n};\n\nDatashareService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DatashareService,\n  factory: DatashareService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/Users/Elija/E_Store/MyStore/MyStore/ClientApp/src/app/services/datashare.service.ts"],"names":["Customer","BehaviorSubject","CartProduct","Product","i0","DatashareService","constructor","customerData","logginData","cartData","totalItems","products","search","count1","currentCustomerData","asObservable","currentLogginData","currentCartData","currentTotalItems","currentProducts","currentSearch","ngOnInit","getTotal","setSearch","data","next","getSearch","setProducts","getProducts","setCustomerData","getCustomerData","setLoginData","getLoginData","setCartData","getCartData","setTotalItems","getTotalItems","addCount","value","decCount","subscribe","sum","forEach","obj","quantity","ɵfac","DatashareService_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import { Customer } from '../models/customer.model';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { CartProduct } from '../models/cart_product.model';\r\nimport { Product } from '../models/product.model';\r\nimport * as i0 from \"@angular/core\";\r\nexport class DatashareService {\r\n    constructor() {\r\n        //MUST BE CLASSES NOT IMPORTS!!!\r\n        this.customerData = new BehaviorSubject(new Customer);\r\n        this.logginData = new BehaviorSubject(false);\r\n        //private cartData: BehaviorSubject<Array<CartProduct>> = new BehaviorSubject([]);\r\n        this.cartData = new BehaviorSubject([new CartProduct]);\r\n        this.totalItems = new BehaviorSubject(0);\r\n        //private cartData = new BehaviorSubject<CartProduct[]>([])\r\n        this.products = new BehaviorSubject([new Product]);\r\n        //{productId: 0, name: '', price: 0, info : '', category : '', picture : '', quantity: 0}\r\n        this.search = new BehaviorSubject('');\r\n        this.count1 = 0;\r\n        //count2 = 0;\r\n        //item = {cartProductId: 0, productId: 0, customerId: 0, quantity: 0}\r\n        this.currentCustomerData = this.customerData.asObservable();\r\n        this.currentLogginData = this.logginData.asObservable();\r\n        this.currentCartData = this.cartData.asObservable();\r\n        this.currentTotalItems = this.totalItems.asObservable();\r\n        this.currentProducts = this.products.asObservable();\r\n        this.currentSearch = this.search.asObservable();\r\n    }\r\n    ngOnInit() {\r\n        this.getTotal();\r\n    }\r\n    setSearch(data) {\r\n        this.search.next(data);\r\n    }\r\n    getSearch() {\r\n        return this.search;\r\n    }\r\n    setProducts(data) {\r\n        this.products.next(data);\r\n    }\r\n    getProducts() {\r\n        return this.products;\r\n    }\r\n    setCustomerData(data) {\r\n        this.customerData.next(data);\r\n    }\r\n    getCustomerData() {\r\n        return this.customerData;\r\n    }\r\n    setLoginData(data) {\r\n        this.logginData.next(data);\r\n    }\r\n    getLoginData() {\r\n        return this.customerData;\r\n    }\r\n    setCartData(data) {\r\n        this.cartData.next(data);\r\n    }\r\n    getCartData() {\r\n        return this.cartData;\r\n    }\r\n    setTotalItems(data) {\r\n        this.totalItems.next(data);\r\n    }\r\n    getTotalItems() {\r\n        return this.totalItems;\r\n    }\r\n    addCount(value) {\r\n        this.count1 += value;\r\n        this.totalItems.next(this.count1);\r\n    }\r\n    decCount(value) {\r\n        this.count1 -= value;\r\n        this.totalItems.next(this.count1);\r\n    }\r\n    async getTotal() {\r\n        await this.currentCartData.subscribe(data => {\r\n            let sum = 0;\r\n            data.forEach((obj) => {\r\n                sum += obj.quantity;\r\n            });\r\n            this.count1 = sum;\r\n            this.setTotalItems(sum);\r\n        });\r\n    }\r\n}\r\nDatashareService.ɵfac = function DatashareService_Factory(t) { return new (t || DatashareService)(); };\r\nDatashareService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: DatashareService, factory: DatashareService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}