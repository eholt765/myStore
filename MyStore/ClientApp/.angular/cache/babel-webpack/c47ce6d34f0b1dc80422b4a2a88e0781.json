{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\Elija\\\\E_Store\\\\MyStore\\\\MyStore\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet CheckoutComponent = class CheckoutComponent {\n  constructor(datashare, productService) {\n    this.datashare = datashare;\n    this.productService = productService;\n    this.cartData = [];\n    this.products = [];\n    this.totalItems = 0;\n    this.totalCost = 0;\n  }\n\n  ngOnInit() {\n    this.getCart();\n    this.getInfo();\n    this.datashare.currentCartData.subscribe(data => {\n      let sum = 0;\n      data.forEach(obj => {\n        sum += obj.quantity;\n      });\n      console.log(sum);\n      this.totalItems = sum;\n    });\n  }\n\n  getCart() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.datashare.getCartData().subscribe(data => {\n        _this.cartData = data;\n      });\n    })();\n  }\n\n  getInfo() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      for (let i = 0; i < _this2.cartData.length; i++) {\n        //let total = 0;\n        let idNumb = _this2.cartData[i].productId;\n        let p = {\n          productId: 0,\n          name: '',\n          price: 0,\n          info: '',\n          category: '',\n          picture: '',\n          quantity: 0\n        };\n\n        if (idNumb != 0) {\n          yield _this2.getProduct(idNumb).subscribe(data => {\n            p = data;\n\n            _this2.products.push(p);\n\n            _this2.totalCost += _this2.cartData[i].quantity * p.price;\n          });\n        }\n      }\n\n      _this2.totalCost = parseFloat(_this2.totalCost.toFixed(2));\n    })();\n  }\n\n  getProduct(id) {\n    return this.productService.getProd(id);\n  }\n\n  getTotalCost() {\n    let total = 0;\n    this.products.forEach(obj => {\n      total += obj.quantity;\n    });\n    console.log(\"total is: \" + total);\n    this.totalCost = total;\n  }\n\n};\nCheckoutComponent = __decorate([Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.component.html',\n  styleUrls: ['./checkout.component.css']\n})], CheckoutComponent);\nexport { CheckoutComponent };","map":{"version":3,"sources":["C:/Users/Elija/E_Store/MyStore/MyStore/ClientApp/src/app/checkout/checkout.component.ts"],"names":["__decorate","Component","CheckoutComponent","constructor","datashare","productService","cartData","products","totalItems","totalCost","ngOnInit","getCart","getInfo","currentCartData","subscribe","data","sum","forEach","obj","quantity","console","log","getCartData","i","length","idNumb","productId","p","name","price","info","category","picture","getProduct","push","parseFloat","toFixed","id","getProd","getTotalCost","total","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nlet CheckoutComponent = class CheckoutComponent {\r\n    constructor(datashare, productService) {\r\n        this.datashare = datashare;\r\n        this.productService = productService;\r\n        this.cartData = [];\r\n        this.products = [];\r\n        this.totalItems = 0;\r\n        this.totalCost = 0;\r\n    }\r\n    ngOnInit() {\r\n        this.getCart();\r\n        this.getInfo();\r\n        this.datashare.currentCartData.subscribe(data => {\r\n            let sum = 0;\r\n            data.forEach((obj) => {\r\n                sum += obj.quantity;\r\n            });\r\n            console.log(sum);\r\n            this.totalItems = sum;\r\n        });\r\n    }\r\n    async getCart() {\r\n        await this.datashare.getCartData().subscribe(data => {\r\n            this.cartData = data;\r\n        });\r\n    }\r\n    async getInfo() {\r\n        for (let i = 0; i < this.cartData.length; i++) {\r\n            //let total = 0;\r\n            let idNumb = this.cartData[i].productId;\r\n            let p = { productId: 0, name: '', price: 0, info: '', category: '', picture: '', quantity: 0 };\r\n            if (idNumb != 0) {\r\n                await this.getProduct(idNumb).subscribe(data => {\r\n                    p = data;\r\n                    this.products.push(p);\r\n                    this.totalCost += (this.cartData[i].quantity * p.price);\r\n                });\r\n            }\r\n        }\r\n        this.totalCost = parseFloat(this.totalCost.toFixed(2));\r\n    }\r\n    getProduct(id) {\r\n        return this.productService.getProd(id);\r\n    }\r\n    getTotalCost() {\r\n        let total = 0;\r\n        this.products.forEach((obj) => {\r\n            total += obj.quantity;\r\n        });\r\n        console.log(\"total is: \" + total);\r\n        this.totalCost = total;\r\n    }\r\n};\r\nCheckoutComponent = __decorate([\r\n    Component({\r\n        selector: 'app-checkout',\r\n        templateUrl: './checkout.component.html',\r\n        styleUrls: ['./checkout.component.css']\r\n    })\r\n], CheckoutComponent);\r\nexport { CheckoutComponent };\r\n"]},"metadata":{},"sourceType":"module"}